<!-- flaskr/templates/admin/admin_mdeditor.html -->

{% extends 'admin/admin_base.html' %}

{% block css %}
    {{ super() }}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
    <!-- 引入MDeditor依赖的css样式 -->
    <link rel="stylesheet" href="{{ url_for('static', filename='3rd/editor/css/editormd.min.css') }}">
{% endblock %}

{% block content %}
<!--    <div class="container content-container container-lg posts-container">-->
    <div class="container content-container">
        <div class="row justify-content-center">
            <div class="col-12 inline-form-container">
                <!-- 文章编辑表单开始 -->
                <form action="#" class="col-12" method="post">
                    {{ form.csrf_token }}
                    <div class="form-group">
                        {{ form.title.label(class="sr-only") }}
                        {{ form.title(class="form-control form-control-lg", placeholder="标题") }}
                    </div>
                    <div id="markdownEditor">
                        {{ form.content_markdown(style="display:none;") }}
                    </div>
                    <div class="form-group">
                        {{ form.description.label(class="src-only") }}
                        {{ form.description(class="form-control", placeholder="SEO 信息，默认取文章前150个字符", maxlength="150", rows="3") }}
                    </div>
                    {{ form.publish(class='btn btn-info') }}
                    {{ form.save(class='btn btn-warning ml-2') }}
                    {% if form.errors %}
                        {{ form.errors }}
                    {% endif %}
                </form>
                <!-- 文章编辑表单结束 -->
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>
    <!-- 引入 MDeditor 依赖的JS脚本 -->
    <script src="{{ url_for('static', filename='3rd/editor/editormd.min.js') }}"></script>
    <script>
        (function ($) {
            $('select').selectpicker();

            // 启动并配置 Editor 编辑器
            $(function () {
                editormd("markdownEditor", {
                    // 必要设置
                    height: 600,
                    path: "{{ url_for('static', filename='3rd/editor/lib/') }}",
                    saveHTMLToTextarea: true,
                });
            });
        })(jQuery);
    </script>
{% endblock %}